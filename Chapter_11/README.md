# 서울 아파트 매매 실거래가 분석 및 시각화

## 프로젝트 개요

이 프로젝트는 공공데이터포털의 API를 활용하여 **2024년 1월부터 2025년 7월까지** 서울특별시의 아파트 매매 실거래가 데이터를 수집하고, 아래와 같은 다양한 분석을 수행하여 지도 위에 단계 구분도(Choropleth map)로 시각화하는 과정을 포함합니다.

- 자치구별 단위 면적(m²)당 평균 매매가 분석
- 자치구별 거래 빈도 분석 (거래 활성화 지역 파악)
- 기간별(상반기/하반기) 가격 변동률 분석

## 주요 기능

- **데이터 수집**: `data.go.kr`의 국토교통부 실거래가 정보와 통계지리정보서비스(SGIS)의 행정구역 경계 데이터를 API로 수집합니다.
- **데이터 전처리**: 수집한 데이터에서 불필요한 정보를 제거하고, 거래 취소 건을 제외하는 등 분석에 적합한 형태로 가공합니다.
- **데이터 분석**: 서울시 각 자치구별로 아파트의 단위 면적(m²)당 평균 매매가, 거래량, 가격 변동률을 계산합니다.
- **데이터 병합**: 분석된 데이터와 행정구역 경계(GeoJSON) 데이터를 병합합니다.
- **시각화**: `geopandas`와 `matplotlib`을 사용하여 분석 결과를 서울시 지도 위에 단계 구분도로 시각화하고 이미지 파일(PNG)로 저장합니다.

## 프로젝트 구조

```
Chapter_11/
├── input/
├── output/             # 결과 파일(CSV, GeoJSON, PNG)이 저장되는 디렉터리
├── .env                # API 키 저장을 위한 환경변수 파일
├── .gitignore
├── step_1.py           # 프로젝트 디렉터리 구조 생성
├── step_2_1.py         # 서울시 시군구 코드 데이터 수집
├── step_2_2.py         # (테스트용) 특정 지역 아파트 실거래가 조회
├── step_2_3.py         # [수정됨] 2024.01 ~ 2025.07 실거래가 데이터 수집
├── step_2_4.py         # 자치구별 단위 면적당 평균 가격 계산
├── step_3_1.py         # (테스트용) 행정구역 경계 데이터 조회 및 시각화
├── step_3_2.py         # 서울시 행정구역 경계 데이터(GeoJSON) 저장
├── step_3_3.py         # 가격 데이터와 지리 데이터 병합
├── step_3_4.py         # 평균 가격 단계 구분도 생성 및 이미지 저장
├── step_3_5.py         # [추가됨] 거래 빈도 단계 구분도 생성 및 이미지 저장
├── step_3_6.py         # [추가됨] 가격 변동률 단계 구분도 생성 및 이미지 저장
└── README.md           # 프로젝트 설명 파일
```

## 실행 순서

각 스크립트는 순차적으로 실행되어야 최종 결과물을 얻을 수 있습니다. 


1.  **`step_1.py`**: `input`, `output` 폴더를 생성합니다.
2.  **`step_2_1.py`**: `output/step_2_1.csv` (서울시 자치구 코드)를 생성합니다.
3.  **`step_2_3.py`**: `output/step_2_3.csv` (2024.01 ~ 2025.07 서울시 아파트 실거래가)를 생성합니다.
4.  **`step_2_4.py`**: `output/step_2_4.csv` (단위 면적당 평균 가격)를 생성합니다.
5.  **`step_3_2.py`**: `output/step_3_2.geojson` (서울시 행정구역 경계)을 생성합니다.
6.  **`step_3_3.py`**: `output/step_3_3.geojson` (가격 정보가 포함된 GeoJSON)을 생성합니다.
7.  **`step_3_4.py`**: `output/step_3_4.png` (평균 가격 시각화)를 생성합니다.
8.  **`step_3_5.py`**: `output/step_3_5.png` (거래 빈도 시각화)를 생성합니다.
9.  **`step_3_6.py`**: `output/step_3_6.png` (가격 변동률 시각화)를 생성합니다.

## 필요 라이브러리

- pandas
- geopandas
- datakart
- tqdm
- python-dotenv
- matplotlib
- seaborn

## 설정

프로젝트 실행 전, `.env` 파일을 생성하고 아래와 같이 공공데이터포털 , 통계지리정보서비스에서 발급받은 API 키를 입력해야 합니다.

```
DATAGO_KEY="YOUR_DATAGO_API_KEY"
SGIS_KEY="YOUR_SGIS_API_KEY"
SGIS_SECRET="YOUR_SGIS_API_SECRET"
```